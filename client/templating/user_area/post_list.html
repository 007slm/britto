<template name="post_list">
  {{#if user }}
  <section class="post_list">
    <h2>Hi {{#with user}}{{ name }}{{/with}}!</h2>
    
    {{#with posts}}
    <div id="sort-control">
        <ul id="post-list-sort">
          <li>Sort by</li>
          <li><a href="user_area/post_list?sort=title&orderby={{orderby}}">title</a></li>
          <li><a href="user_area/post_list?sort=created&orderby={{orderby}}">date</a></li>
          <li><a href="user_area/post_list?sort=author&orderby={{orderby}}">author</a></li>
          <li><a href="user_area/post_list?sort=published&orderby={{orderby}}">published</a></li>
        </ul>
        <select id="orderby">
        <option name="select-orderby" {{#if orderby_asc}}selected="selected"{{/if}} value="asc">ascending</option>
        <option name="select-orderby" {{#if orderby_desc}}selected="selected"{{/if}} value="desc">descending</option>
      </select>
    </div>
    <table id="post-table">
      <tbody>
      <tr>
        <th>Title:</th>
        <th>Author:</th>
        <th>Date:</th>
        <th>Edit:</th>
        <th>Publish:</th>
        <th>Delete:</th>
      </tr>
      {{#each posts}}
        <tr>
          <td class="post-title"><a href="/blog/{{slug}}">{{title}}</a></td>
          <td class="post-author">{{postUser author}}</td>
          <td class="post-date">{{date created}}</td>
          <td id="post-edit-{{_id}}"><input data-slug="{{slug}}" class="post-edit-button" type="button" value="Edit" /></td>
          {{#if published }}
          <td id="post-unpublish-{{_id}}"><input class="post-unpublish-button" data-slug="{{slug}}" type="button" value="Unpublish" /></td>
          {{else}}
          <td id="post-publish-{{_id}}"><input class="post-publish-button" data-slug="{{slug}}" type="button" value="Publish" /></td>
          {{/if}}
          <td id="post_delete_{{_id}}"><input  data-id="{{_id}}" class="post-delete-button" type="button" value="Delete" /></td>
        </tr>
      {{/each}}
      </tbody>
    </table>
    {{/with}}
  </section>
  {{/if}}
</template>
